{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Context = require('./Context');\n\nvar _Context2 = _interopRequireDefault(_Context);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar SayPrimitive = function (_React$Component) {\n  (0, _inherits3.default)(SayPrimitive, _React$Component);\n\n  function SayPrimitive(props) {\n    (0, _classCallCheck3.default)(this, SayPrimitive);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (SayPrimitive.__proto__ || (0, _getPrototypeOf2.default)(SayPrimitive)).call(this, props));\n\n    _this.handleBoundary = _this.handleBoundary.bind(_this);\n    _this.handleEnd = _this.handleEnd.bind(_this);\n    _this.handleError = _this.handleError.bind(_this);\n    _this.handleStart = _this.handleStart.bind(_this);\n    _this.state = {\n      id: Date.now() + Math.random()\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(SayPrimitive, [{\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      // TODO: Should dequeue self on unmount\n      this.unmounted = true;\n      this.props.context.cancel(this.state.id).catch(function (err) {\n        return 0;\n      });\n    }\n  }, {\n    key: 'handleBoundary',\n    value: function handleBoundary(event) {\n      !this.unmounted && this.props.onBoundary && this.props.onBoundary(event);\n    }\n  }, {\n    key: 'handleEnd',\n    value: function handleEnd(event) {\n      !this.unmounted && this.props.onEnd && this.props.onEnd(event);\n    }\n  }, {\n    key: 'handleError',\n    value: function handleError(event) {\n      !this.unmounted && this.props.onError && this.props.onError(event);\n    }\n  }, {\n    key: 'handleStart',\n    value: function handleStart(event) {\n      !this.unmounted && this.props.onStart && this.props.onStart(event);\n    }\n  }, {\n    key: 'shouldComponentUpdate',\n    value: function shouldComponentUpdate(nextProps) {\n      return nextProps.speak !== this.props.speak;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      (0, _asyncToGenerator3.default)(\n      /*#__PURE__*/\n      _regenerator2.default.mark(function _callee() {\n        var _props, context, lang, pitch, rate, text, voice, volume, id;\n\n        return _regenerator2.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _props = _this2.props, context = _props.context, lang = _props.lang, pitch = _props.pitch, rate = _props.rate, text = _props.speak, voice = _props.voice, volume = _props.volume;\n                id = _this2.state.id;\n                context.speak({\n                  id: id,\n                  lang: lang,\n                  onBoundary: _this2.handleBoundary,\n                  onEnd: _this2.handleEnd,\n                  onError: _this2.handleError,\n                  onStart: _this2.handleStart,\n                  pitch: pitch,\n                  rate: rate,\n                  text: text,\n                  voice: voice,\n                  volume: volume\n                });\n\n              case 3:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, _this2);\n      }))().catch(function (err) {\n        return console.error(err);\n      });\n      return false;\n    }\n  }]);\n  return SayPrimitive;\n}(_react2.default.Component);\n\nvar SayPrimitiveWithContext = function SayPrimitiveWithContext(props) {\n  return _react2.default.createElement(_Context2.default.Consumer, null, function (context) {\n    return _react2.default.createElement(SayPrimitive, (0, _extends3.default)({\n      context: context\n    }, props), props.children);\n  });\n};\n\nSayPrimitiveWithContext.propTypes = {\n  lang: _propTypes2.default.string,\n  pitch: _propTypes2.default.number,\n  rate: _propTypes2.default.number,\n  onBoundary: _propTypes2.default.func,\n  onEnd: _propTypes2.default.func,\n  onError: _propTypes2.default.func,\n  onStart: _propTypes2.default.func,\n  speak: _propTypes2.default.string,\n  voice: _propTypes2.default.oneOfType([_propTypes2.default.any, _propTypes2.default.func]),\n  volume: _propTypes2.default.number\n};\nexports.default = SayPrimitiveWithContext;","map":null,"metadata":{},"sourceType":"script"}